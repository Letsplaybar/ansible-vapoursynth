---
- name: "Clone VapourSynth-Vulcan"
  git:
    repo: "https://github.com/Nlzy/vapoursynth-waifu2x-ncnn-vulkan.git"
    dest: "/opt/vapour-vulcan"
    recursive: true
    version: "{{vapour_vulcan_version}}"

- name: "Create build dir"
  file:
    path: "/build/vapour-vulcan/build"
    state: directory
  args:
    chdir: "/opt/vapour-vulcan"

- name: "Build VapourSynth-Vulcan"
  shell: "{{item}}"
  with_items:
    - "cmake .."
    - "cmake --build . -j 4"
  args:
    chdir: "/opt/vapour-vulcan/build"

- name: "Install VapourSynth-Vulcan"
  shell: "cmake install"
  args:
    chdir: "/opt/vapour-vulcan/build"
